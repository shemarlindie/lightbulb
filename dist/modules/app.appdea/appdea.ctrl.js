!function(e){"use strict";e.module("app.appdea").controller("AppdeaCtrl",["FirebaseService","Appdea","User","$scope","$mdDialog","$sanitize","marked",function(t,n,a,o,c,i,p){var d=this;d.userService=a,d.user={},d.appdeas=[],d.loading=!0,d.creating=!1,d.status=[{name:"Not Started",value:0},{name:"In Design",value:1},{name:"In Development",value:2},{name:"Developed",value:3}],d.newAppdea={},d.feedError=void 0,d.init=function(){d.reset(),d.user=a.getProfile(),n.getAll().then(function(e){d.loading=!1,d.appdeas=e})["catch"](function(e){d.feedError=e})["finally"](function(){d.loading=!1})},d.create=function(){d.creating=!0;var e=Date.now()/1e3;d.newAppdea.date_created=e,d.newAppdea.date_updated=e,d.newAppdea.title=i(d.newAppdea.title),n.create(d.newAppdea).then(function(e){d.reset()})["catch"](function(e){console.log("unable to create appdea:",e)})["finally"](function(){d.creating=!1})},d.update=function(e){return e.date_updated=Date.now()/1e3,e.title=i(e.title),n.update(e).then(function(e){})["catch"](function(e){console.log("unable to update appdea:",e)})},d.remove=function(e,t){var a=c.confirm().targetEvent(e).htmlContent("<b>"+t.title+"</b> will be deleted.").ok("Delete").cancel("Cancel");c.show(a).then(function(){n["delete"](t).then(function(e){})["catch"](function(e){console.log("unable to delete appdea:",e)})})},d.edit=function(t,n){c.show({parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,templateUrl:"modules/app.appdea/views/appdea.edit.dialog.tpl.html",locals:{status:d.status,appdea:n},controllerAs:"vm",controller:["$mdDialog","status","appdea",function(t,n,a){var o=this;o.status=n,o.appdea=e.copy(a),o.cancel=function(){t.cancel()},o.save=function(){t.hide(e.extend(a,o.appdea))}}]}).then(function(e){d.update(e)})},d.reset=function(){d.newAppdea={status:0},d.appdeaCreateForm&&(d.appdeaCreateForm.$setPristine(),d.appdeaCreateForm.$setUntouched())};var l=function(e){e?(n.connect(),d.init()):n.disconnect()};t.onAuth(l),o.$on("$destroy",function(){t.offAuth(l)})}])}(angular);